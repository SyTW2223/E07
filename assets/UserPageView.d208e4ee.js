import{b as w,u as b,a as x,k as y,o as n,j as f,w as o,d as l,G as S,D as v,m as V,H as $,p as i,t as C,q as T,v as U,x as F,y as N,c as d,z as _,F as m,A,i as B,h as p,s as E,f as h,e as R}from"./index.f9402bec.js";import{_ as k}from"./TweetVuetify.vue_vue_type_style_index_0_lang.915b7aa6.js";const g=`${R}`,r=w(),z=b(),c=x(),I={name:"SignUp",components:{TweetVuetify:k},data(){return{textAreaValue:"",user:E(r).searched_user,publications:new Array,followed:!1,is_logged_user:!1}},methods:{async removeTweetComponent(e){console.log("removing form element",e);const a=this.publications.findIndex(s=>s.id===e);this.publications.splice(a,1),c.successSnackbar("Tweet deleted")},addTweetFirst(e){this.publications.push({id:e.id,username:this.user.username,text:e.content.text,date:e.date,liked:e.liked,comments_count:e.comments_count,fav_count:e.fav_count,pfp_url:e.pfp_url})},async followUser(e){this.followed=!this.followed,await h.put(`${g}/user/${z.user_id}`,{changes:{follows:{username:e,follow_status:this.followed}}}).then(a=>{a.message&&c.successSnackbar(a.message)}).catch(a=>{c.error(a.err),console.log(a.err)})}},async beforeMount(){this.$route.params.userName==r.logged_user.username&&(this.is_logged_user=!0),await r.getByUserName(this.$route.params.userName),r.searched_user.followed&&(this.followed=r.searched_user.followed),r.searched_user.pfp_url||(r.searched_user.pfp_url="/E07/logo_without_letters.png");const e=r.tweets;e!==null&&e.forEach(async s=>{await h.get(`${g}/publication/${s}`,null).then(t=>{t.message&&c.successSnackbar(t.message),t.pfp_url||(t.pfp_url="/E07/logo_without_letters.png");let u={id:t._id,username:t.owner_username,content:{text:t.content.text},date:t.date,liked:t.liked,comments_count:t.comments_count,fav_count:t.fav_count,pfp_url:t.pfp_url};this.addTweetFirst(u)}).catch(t=>{c.error(t.err)})})}},M=y({...I,setup(e){const a=w();return(s,t)=>(n(),f(p,null,{default:o(()=>[l($,null,{default:o(()=>[l(S,{"align-self":"center"},{default:o(()=>[l(v,{src:V(a).searched_user.pfp_url,"aspect-ratio":"6"},null,8,["src"])]),_:1})]),_:1}),l(T,{style:{"text-align":"center","font-size":"33px"}},{default:o(()=>[i(C(s.user.username),1)]),_:1}),s.is_logged_user?A("",!0):(n(),f(U,{key:0,onClick:t[0]||(t[0]=F(u=>s.followUser(s.user.username),["prevent"])),elevation:"2",class:"mx-auto text-xs-center",style:N([{display:"flex",width:"150px",height:"40px",color:"white"},{"background-color":s.followed?"grey":"#1f548b"}]),rounded:""},{default:o(()=>[s.followed?(n(),d(m,{key:0},[l(_,null,{default:o(()=>[i("mdi-account-check")]),_:1}),i(" Followed ")],64)):(n(),d(m,{key:1},[l(_,null,{default:o(()=>[i("mdi-account-circle")]),_:1}),i(" Follow ")],64))]),_:1},8,["style"])),l(p,null,{default:o(()=>[(n(!0),d(m,null,B(s.publications,u=>(n(),f(k,{key:u.id,tweet:u,style:{"border-bottom":"1px solid grey"},onRemove:s.removeTweetComponent},null,8,["tweet","onRemove"]))),128))]),_:1})]),_:1}))}}),D=y({__name:"UserPageView",setup(e){return(a,s)=>(n(),d("main",null,[l(M)]))}});export{D as default};
