import{u as h,a as T,b as f,s as g,f as d,e as V,r as b,o as l,c as i,d as n,w as r,V as k,g as v,h as p,F as A,i as w,j as S,T as C,k as E}from"./index.5810f008.js";import{_ as F}from"./TweetVuetify.vue_vue_type_style_index_0_lang.0c04b846.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";const _=h(),u=T(),U=f(),m=`${V}`,$={name:"SignUp",components:{TweetVuetify:F},data(){return{textAreaValue:"",errorAlertText:"undefined",errorAlertEnabled:!1,user:g(f()).logged_user,publications:new Array}},methods:{async removeTweetComponent(e){console.log("removing form element",e);const t=this.publications.findIndex(o=>o.id===e);this.publications.splice(t,1),u.successSnackbar("Tweet deleted")},async postTweet(){return await d.post(`${m}/publication`,{content:{text:this.textAreaValue},date:new Date}).then(e=>{e.pfp_url||(e.pfp_url="/E07/logo_without_letters.png");let t={id:e._id,username:e.owner_username,content:{text:e.content.text},date:e.date,fav_count:e.fav_count,comments_count:e.comments_count,liked:e.liked,pfp_url:e.pfp_url};this.addTweetFirst(t),this.textAreaValue="",u.successSnackbar("Tweet added")}).catch(e=>{u.error(e.err)})},addTweetLast(e){this.publications.push({id:e.id,username:e.username,text:e.content.text,date:e.date,fav_count:e.fav_count,comments_count:e.comments_count,liked:e.liked,pfp_url:e.pfp_url})},addTweetFirst(e){this.publications.unshift({id:e.id,username:e.username,text:e.content.text,date:e.date,fav_count:e.fav_count,comments_count:e.comments_count,liked:e.liked,pfp_url:e.pfp_url})}},async beforeMount(){await U.getById(_.user_id),await d.get(`${m}/userfeed/${_.user_id}`,null).then(e=>{e.forEach(t=>{t.pfp_url||(t.pfp_url="/E07/logo_without_letters.png");let o={id:t._id,username:t.owner_username,content:{text:t.content.text},date:t.date,fav_count:t.fav_count,comments_count:t.comments_count,liked:t.liked,pfp_url:t.pfp_url};this.addTweetLast(o)})}).catch(e=>{u.error(e.err)})}};function I(e,t,o,R,a,c){const x=b("TweetVuetify");return l(),i("div",null,[n(p,null,{default:r(()=>[n(k,null,{default:r(()=>[n(v,{density:"compact",variant:"solo",label:"Write here to add a publication...","append-inner-icon":a.textAreaValue.length>0?"mdi-pencil":"undefined","single-line":"","hide-details":"",modelValue:a.textAreaValue,"onUpdate:modelValue":t[0]||(t[0]=s=>a.textAreaValue=s),"onClick:appendInner":c.postTweet},null,8,["append-inner-icon","modelValue","onClick:appendInner"])]),_:1})]),_:1}),n(C,{name:"fade"},{default:r(()=>[n(p,null,{default:r(()=>[(l(!0),i(A,null,w(a.publications,s=>(l(),S(x,{key:s.id,tweet:s,style:{"border-bottom":"1px solid grey"},onRemove:c.removeTweetComponent},null,8,["tweet","onRemove"]))),128))]),_:1})]),_:1})])}const L=B($,[["render",I]]),j=E({__name:"HomePageView",setup(e){return(t,o)=>(l(),i("main",null,[n(L)]))}});export{j as default};
