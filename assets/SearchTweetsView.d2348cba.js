import{u as h,a as T,b as g,k as _,o,c as d,d as r,w as n,C as i,q as S,I as w,g as x,p as v,h as l,F as y,i as V,T as b,s as k,f as c,j as F,e as B}from"./index.f9402bec.js";import{_ as f}from"./TweetVuetify.vue_vue_type_style_index_0_lang.915b7aa6.js";import{l as C}from"./lodash.d9674e57.js";const A=h(),u=T(),m=g(),p=`${B}`,$={name:"SignUp",components:{TweetVuetify:f},data(){return{search:"",textAreaValue:"",errorAlertText:"undefined",errorAlertEnabled:!1,user:k(m).logged_user,tweets:new Array,searchDelay:1e3,delayedSearchFunc:new Function}},methods:{async removeTweetComponent(t){console.log("removing form element",t);const e=this.tweets.findIndex(a=>a.id===t);this.tweets.splice(e,1),u.successSnackbar("Tweet deleted")},addTweetFirst(t){this.tweets.unshift({id:t.id,username:t.username,text:t.content.text,date:t.date,fav_count:t.fav_count,comments_count:t.comments_count,liked:t.liked,pfp_url:t.pfp_url})},async delayedGetTweetsBySearchTerm(t){await this.delayedSearchFunc(t)},async getTweetBySearchTerm(t){await c.get(`${p}/publications?searchTerm=${t}`,null).then(e=>{if(e.length==0){this.tweets=[];return}this.tweets=[],e.forEach(a=>{a.pfp_url||(a.pfp_url="/E07/logo_without_letters.png");let s={id:a._id,username:a.owner_username,content:{text:a.content.text},date:a.date,fav_count:a.fav_count,comments_count:a.comments_count,liked:a.liked,pfp_url:a.pfp_url};this.addTweetFirst(s)})}).catch(e=>{u.error(e.err)})}},async beforeMount(){await m.getById(A.user_id),this.delayedSearchFunc=C.exports.debounce(this.getTweetBySearchTerm,this.searchDelay),await c.get(`${p}/publications/`,null).then(t=>{t.forEach(e=>{e.pfp_url||(e.pfp_url="/E07/logo_without_letters.png");let a={id:e._id,username:e.owner_username,content:{text:e.content.text},date:e.date,fav_count:e.fav_count,comments_count:e.comments_count,liked:e.liked,pfp_url:e.pfp_url};this.addTweetFirst(a)})}).catch(t=>{u.error(t.err)})}},E=_({...$,setup(t){return(e,a)=>(o(),d("div",null,[r(l,null,{default:n(()=>[r(i,null,{default:n(()=>[r(S,null,{default:n(()=>[r(w),r(x,{modelValue:e.search,"onUpdate:modelValue":a[0]||(a[0]=s=>e.search=s),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":"",onInput:a[1]||(a[1]=s=>e.delayedGetTweetsBySearchTerm(e.search))},{default:n(()=>[v(" >")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),r(l,null,{default:n(()=>[r(i,{title:"All published tweets",variant:"tonal"})]),_:1}),r(b,{name:"fade"},{default:n(()=>[r(l,null,{default:n(()=>[(o(!0),d(y,null,V(e.tweets,s=>(o(),F(f,{key:s.id,tweet:s,style:{"border-bottom":"1px solid grey"},onRemove:e.removeTweetComponent},null,8,["tweet","onRemove"]))),128))]),_:1})]),_:1})]))}}),G=_({__name:"SearchTweetsView",setup(t){return(e,a)=>(o(),d("main",null,[r(E)]))}});export{G as default};
