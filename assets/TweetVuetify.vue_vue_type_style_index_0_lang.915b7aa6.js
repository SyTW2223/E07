import{a as g,k as V,b as $,o as h,j as k,w as t,d as a,l as C,m as d,n as r,p as o,t as i,q as T,V as b,v as c,x as m,y as S,z as f,A as x,B as p,C as B,f as _,R as v,e as A}from"./index.f9402bec.js";const N=["src"],z={class:"date"},D={class:"num"},I={class:"num"},u=g(),y=`${A}`,L={props:["tweet"],emits:["remove"],data:()=>({liked:!1,fav_count:0,comments_count:0}),created(){this.fav_count=this.tweet.fav_count,this.comments_count=this.tweet.comments_count,this.liked=this.tweet.liked},methods:{async likeTweet(e){this.liked=!this.liked,await _.put(`${y}/publication/like/${e}`,{liked:this.liked}).then(()=>{this.liked?(u.successSnackbar("Tweet liked"),this.fav_count+=1):(u.successSnackbar("Like removed from tweet"),this.fav_count+=-1),console.log(this.fav_count)}).catch(s=>{u.error(s.err),console.log(s.err)})},commentOnTweet(e){this.$router.push({name:"tweet",params:{tweetID:this.tweet.id}})},async deleteTweet(e){await _.delete(`${y}/publication/${e}`,null).then(()=>{this.$emit("remove",e)}).catch(s=>{u.error(s.err),console.log(s.err)})},async beforeCreate(){console.log(this.tweet.date)}}},R=V({...L,__name:"TweetVuetify",setup(e){g();const s=$();return(l,n)=>(h(),k(B,{style:{width:"100%",margin:"0 auto","border-radius":"2px"},to:`/tweet/${e.tweet.id}`},{default:t(()=>[a(T,null,{default:t(()=>[a(C,{size:"40px"},{default:t(()=>[a(d(v),{to:`/${e.tweet.username}`},{default:t(()=>[r("img",{style:{"max-width":"100%","max-height":"100%"},src:e.tweet.pfp_url,alt:""},null,8,N)]),_:1},8,["to"])]),_:1}),a(d(v),{style:{"margin-left":"5px"},class:"username-link",to:`/${e.tweet.username}`},{default:t(()=>[o(i(e.tweet.username),1)]),_:1},8,["to"]),r("span",z,i(e.tweet.date.slice(0,10)),1)]),_:1}),a(b,null,{default:t(()=>[o(i(e.tweet.text),1)]),_:1}),a(p,null,{default:t(()=>[a(c,{"data-test":"like-button",onClick:n[0]||(n[0]=m(w=>l.likeTweet(e.tweet.id),["prevent"])),style:S({color:l.liked?"red":"grey"})},{default:t(()=>[a(f,null,{default:t(()=>[o("mdi-heart")]),_:1})]),_:1},8,["style"]),r("span",D,i(l.fav_count),1),a(c,{onClick:n[1]||(n[1]=m(w=>l.commentOnTweet(e.tweet.id),["prevent"])),color:"blue"},{default:t(()=>[a(f,null,{default:t(()=>[o("mdi-comment")]),_:1})]),_:1}),r("span",I,i(l.comments_count),1),e.tweet.username==d(s).logged_user.username?(h(),k(c,{key:0,onClick:n[2]||(n[2]=m(w=>l.deleteTweet(e.tweet.id),["prevent"])),class:"delete-button"},{default:t(()=>[a(f,{style:{"margin-left":"auto"}},{default:t(()=>[o("mdi-delete")]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1},8,["to"]))}});export{R as _};
