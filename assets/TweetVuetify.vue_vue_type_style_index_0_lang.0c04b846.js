import{k as y,a as g,b as V,o as w,j as h,w as t,d as a,l as $,m as u,n as r,p as o,t as i,q as C,V as S,v as d,x as c,y as T,z as m,A as b,B as x,C as p,f as k,R as _,e as B}from"./index.5810f008.js";const A=["src"],N={class:"date"},z={class:"num"},D={class:"num"},v=`${B}`,I={props:["tweet"],emits:["remove"],data:()=>({liked:!1,fav_count:0,comments_count:0}),created(){this.fav_count=this.tweet.fav_count,this.comments_count=this.tweet.comments_count,this.liked=this.tweet.liked},methods:{async likeTweet(e){this.liked=!this.liked,await k.put(`${v}/publication/like/${e}`,{liked:this.liked}).then(()=>{this.liked?(alertStore.successSnackbar("Tweet liked"),this.fav_count+=1):(alertStore.successSnackbar("Like removed from tweet"),this.fav_count+=-1),console.log(this.fav_count)}).catch(s=>{alertStore.error(s.err),console.log(s.err)})},commentOnTweet(e){this.$router.push({name:"tweet",params:{tweetID:this.tweet.id}})},async deleteTweet(e){await k.delete(`${v}/publication/${e}`,null).then(()=>{this.$emit("remove",e)}).catch(s=>{alertStore.error(s.err),console.log(s.err)})},async beforeCreate(){console.log(this.tweet.date)}}},O=y({...I,__name:"TweetVuetify",setup(e){g();const s=V();return(l,n)=>(w(),h(p,{style:{width:"100%",margin:"0 auto","border-radius":"2px"},to:`/tweet/${e.tweet.id}`},{default:t(()=>[a(C,null,{default:t(()=>[a($,{size:"40px"},{default:t(()=>[a(u(_),{to:`/${e.tweet.username}`},{default:t(()=>[r("img",{style:{"max-width":"100%","max-height":"100%"},src:e.tweet.pfp_url,alt:""},null,8,A)]),_:1},8,["to"])]),_:1}),a(u(_),{style:{"margin-left":"5px"},class:"username-link",to:`/${e.tweet.username}`},{default:t(()=>[o(i(e.tweet.username),1)]),_:1},8,["to"]),r("span",N,i(e.tweet.date.slice(0,10)),1)]),_:1}),a(S,null,{default:t(()=>[o(i(e.tweet.text),1)]),_:1}),a(x,null,{default:t(()=>[a(d,{"data-test":"like-button",onClick:n[0]||(n[0]=c(f=>l.likeTweet(e.tweet.id),["prevent"])),style:T({color:l.liked?"red":"grey"})},{default:t(()=>[a(m,null,{default:t(()=>[o("mdi-heart")]),_:1})]),_:1},8,["style"]),r("span",z,i(l.fav_count),1),a(d,{onClick:n[1]||(n[1]=c(f=>l.commentOnTweet(e.tweet.id),["prevent"])),color:"blue"},{default:t(()=>[a(m,null,{default:t(()=>[o("mdi-comment")]),_:1})]),_:1}),r("span",D,i(l.comments_count),1),e.tweet.username==u(s).logged_user.username?(w(),h(d,{key:0,onClick:n[2]||(n[2]=c(f=>l.deleteTweet(e.tweet.id),["prevent"])),class:"delete-button"},{default:t(()=>[a(m,{style:{"margin-left":"auto"}},{default:t(()=>[o("mdi-delete")]),_:1})]),_:1})):b("",!0)]),_:1})]),_:1},8,["to"]))}});export{O as _};
